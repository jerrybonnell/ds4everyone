# (PART) Introduction {-} 

# Data Science

Data science is a field of science that aims at discovering patterns and gaining knowledge through analysis of data and developing methods for support such investigation.
The field has its foundation in mathematics, statistics, computer science, and vision science and contributed to a wide array of disciplines including biology chemistry, economics, literary studies, medicine, physical sciences, psychology, etc.

What are examples of data science?
Here is a short list (each item with a possible academic discipline that appears the most relevant to it):

* Tracking places where crimes occur in cities for crime prevention (criminology)
* Tracking social media postings to understand changes in public opinions (political science)
* Dynamically changing advertisements in search engines based on the browsing history and query terms (marketing)
* Predicting trajectories of hurricanes (physical sciences)
* Finding genetic factors contributing diseases (medicine)
* Differentiating among novelists based on their writing styles (literary studies)
* Winnowing an enormous candidate list of chemicals for a target effect based on their known properties (chemistry)
* Diagnosing pulmonary diseases based on patient X ray images (medicine)
* Identifying students that are at-risk (education)

The prominence of data science comes from the fact that the technologies for collecting, sharing and analyzing data have become widely accessible.
In many disciplines, research by way of data science has received a formidable status.
Data science has gained a formidable status is in many disciplines.
It is thus important for new generations of professionals (educators, scientists, engineers, doctors, etc.) to know how data sciences and know how to start data science explorations.
The purpose of this course is to introduce its students to the very basic of data science.

We will use the programming language R in our exploration.
R is a programming language with roots in statistics and has a wide variety to tools that make it easy for its user to conduct statistical analysis and visualization.
The syntax for R (i.e., the rules for writing the code for R) is more flexible than many other programming languages.
It also allows its use to create a "notebook", interleaving non-programming parts and programming parts in an intuitive manner.
Also, R can sit in the computer of its user.
Without depending on external sources (except when loading programs other people developed for future use and loading data sets from internet sources).
Thus, after completing the course, the students will be able to keep running and modifying their courses with new data sources and new ideas.

## The `tidyverse` Package

The bare-bones version of R complete but requires quite a bit of effort to write codes for data analysis.
People have developed quite a bit of code in R for serving certain purposes and shared as packages.
You can load a package someone else has written into your R programming environment and use it for your coding.
A nonprofit organization promoting R, [CRAN](https://cran.r-project.org/), maintains packages researchers have developed as a resource base for providing them.

In this course, we use a "package" `tidyverse`.
The package `tidyverse` is a collection of packages, which we call a "meta-package", that covers all packages useful for data analysis and data visualization.

### An Example

Here is an example of plotting data using `tidyverse`.
R comes with a number of data sets.
One of them is `WordPhones`, which provides the number of telephones in some large geographical regions of the world in 1951 and 1956-1961.

The analysis begins by loading the package into your programming environment.

```{r}
library(tidyverse)
```

The data part of this data set is a 7x7 table of numbers where the rows correspond to years and the columns correspond to seven geographical areas, North America, Europe, Asia, South America, Oceania, Africa, and Middle America (meaning Central America).

`tidiverse` uses a specific format for data bases.
The data set is native to R, not to `tidyverse`, and so we need to load the data set into a format that `tidyverse` can analyze.

The next line shows the process of loading data from WorldPhones as a "data frame".

```{r}
wp <- as.data.frame(WorldPhones)
```

By typing the name, you can see the contents.

```{r}
wp
```

Suppose our goal is to plot the trend in the seven regions over the years.
To accomplish the goal, we need to transform the data so that the area and the number appear as column pairs.
Also, we change the row names "1951", etc., to the values of a column.

```{r}
wp0 <- wp %>% rownames_to_column("Year") %>% pivot_longer(cols = 2:8, names_to = "Area", values_to = "Count")
# wp1 <- as.data.frame(t(wp)) %>% rownames_to_column("Area")
```

Here is how the new data set looks like. We see that there are seven rows for each year and the area names and their counts vertically in a pair of columns.


```{r}
wp0
```

We can now plot the changes in the numbers with the year as the horizontal axis and the count as the vertical axis.
We assign different colors to the seven areas using the automatic coloring functionality of the plotting function.
We see that the numbers steadily increased in North America, Europe, and Asia.

```{r}
ggplot(wp0, aes(x = Year, y = Count)) +
  geom_point(aes(color = Area))
```


We can now plot the changes as bars where the same colors represent the regions.

```{r}
ggplot(wp0) +
  geom_bar(aes(x = Year, y = Count, fill = as.factor(Area)), stat = "identity") +
  labs(fill = "Area")

```

## Text Processing

Here is another example where play with a textual data set.

[The Gutenberg Project](http://www.gutenberg.org/) is an international project to provide literary texts in a variety of formats for the public use.
One of the main literary works the site offers is "Moby Dick" by Herman Melville.
You can download from the web site by providing its link.

As before, we need `tidyverse`.
We need another library `readtext`.

```{r}
library(tidyverse)
library(readtext)
```

We load the data from the "Moby Dick" site.
The data we load is actually a small table where the actual text of the work appearing in Row 1, Column 2.
We load the data and collect the data in that position and all it "main".

```{r}
main <- moby_text <- readtext("http://www.gutenberg.org/files/2701/2701-0.txt")[1,2]
```

We can take a look at the first 1,000 characters of the text are as follows:

```{r}
str_sub(main, 1, 1000)
```

Notice that the text has a header where "\n" represents the return key.
The `str_sub` is a method for obtaining a substring. You state inside the parentheses, the source string, the start position, and the end position, where the positions are character positions. 

We can take a look at the last 1,000 characters of the text are as follows:

```{r}
str_sub(main, str_length(main) - 1000, str_length(main))
```


In the two substrings, you notice that the real text of the work starts with "  ETYMOLOGY." and ends before "End of Project Gutenberg".
We extract every character between the the positions these two signature strings specify.

To accomplish this, we obtain the locations of the two key phrases and obtain the substring between the two phrases.

```{r}
p_start <- str_locate(main, fixed("  ETYMOLOGY."))[1]
p_last <- str_locate(main, fixed("End of Project Gutenberg"))[1]
main0 <- str_sub(main, p_start, p_last - 1)
```

The main text starts with "\\nCHAPTER ".
We use it as the separator and generate a list of tests, where each element of the list is a chapter.
The `length(main_parts)` shows the number of elements in the list (that is the number of chapters, including "EPILOGUE") and `str_length(main_parts)` shows the length of each chapter. 

```{r}
main_parts <- unlist(str_split(main0, "\\nCHAPTER "))
length(main_parts)
str_length(main_parts)
```

We turn the list of chapter texts into a data set.
We convert it to "all lowercase" and replace the return key to the white space.
The lowercase version appears as a new column, we call it "origLower".
We trash the original version.

```{r}
main_data <- as.data.frame(main_parts)
main_data %>% rename(original = main_parts) %>% transmute(origLower = str_replace_all(str_to_lower(original), "\\n", " ")) -> main_data0
```

Let us see the first 1,000 characters of the 100th chapter.
Since the work starts with an epilog, the actual chapter number is off by 1, i.e., 99.
The first three characters, "99.", represent the chapter number.

```{r}
str_sub(main_data0$origLower[100],1,1000)
```

We compute the character length (as we did before) and turn the numbers into a column.

```{r}
main_data0 %>% mutate(len = str_length(origLower)) -> main_data1
colnames(main_data1)
```

We compute in each chapter how many times the following words occur: "whale", "ship", "sea", "this", "that", and "god".

```{r}
main_data1 %>% mutate(whale = str_count(origLower, "whale")) %>% mutate(ship = str_count(origLower, "ship"))%>% mutate(sea = str_count(origLower, "sea")) %>% mutate(this = str_count(origLower, "this")) %>% mutate(that = str_count(origLower, "that"))%>% mutate(god = str_count(origLower, "god")) -> main_data2
```

We now plot the relationships between "this" and "that" and the relationships between "whale" and "god".
In the first, we see that where "this" appears a lot "that" appears a lot as well.
In the second, we see that the occurrences of "god" have nothing to do with the occurrences of "whale", except there is one chapter with a very high number of occurrences of "god".

```{r}
ggplot(main_data2, aes(x = this, y = that)) +
  geom_point() + geom_smooth()
ggplot(main_data2, aes(x = whale, y = god)) +
  geom_point() + geom_smooth()
```


### A Rough Organization

Here is the plan for the course.
We will first learn the basics of R programming.
We will then learn how to use `tidyverse` for data formatting and data plotting.
After that, we will study a variety of techniques for analyzing data and visualizing the results.

We hope you will find our journey interesting.






<!--
```{r}
library(tidyverse)
library(readtext)
```

```{r}
scarlet_url <- "https://dev.gutenberg.org/files/36/36-0.txt"
scarlet_text <- readtext(scarlet_url)
head(scarlet_text)
```


```{r}
main <- scarlet_text[1,2]
str_sub(main, 100, 200)
```

```{r}
str_locate(main, fixed("BOOK ONE\nTHE COMING OF"))
str_locate(main, "\\n[IXVL][IXVL]*\\.\\n")
```

```{r}
main_parts <- unlist(str_split(main, "\\n[I|X|V|L][I|X|V|L]*\\.\\n"))
length(main_parts)
for (i in 1:28) {
  print(str_sub(main_parts[i], 1, 20))
}
lll <- str_length(main_parts)
lll
```

```{r}
main_data <- data.frame(as.matrix(lll)) # %>% rename("original" = 1) %>% mutate(first = str_sub(original, 1, 100), .keep = "unused")
```

```{r}
nrow(main_data)
```
-->

